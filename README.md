TREE SEGMENTATION PROTOTYPE
üìñ About the Project

This project is a prototype that addresses the challenge of detecting and segmenting trees automatically using AI models GroundingDINO and SamGeo2.

The implementation is realized through the LangSam class, which combines text-based object detection and segmentation. We use the official PyPI package segment-geospatial.

Goal: Prototype to automatically detect and segment trees. The city of L√ºneburg is interested in a fully usable application to provide the green coverage by trees based on the aerial imagery which can adapted based on this prototype.

    Bounding boxes: Generated by DINO as a GeoJSON file.
    
    Masks: Generated by SAM as GeoTIFF files.

‚ú® Features

    AI-Powered Detection: High-precision tree identification.

    Geospatial Integration: Direct export to GeoJSON and GeoTIFF.

    Interactive UI: Streamlit interface for easy visualization.

    Results of detected and segmented trees visible.


‚öôÔ∏è Installation

To get started, clone the repository to your local machine:
Bash

git clone https://github.com/BentMildner/AITreeCounting.git
cd gpu_app

Docker Setup

The project can be run using Docker for easier deployment on GPU-enabled servers. A Dockerfile and docker-compose.yml are provided to handle dependencies like PyTorch and CUDA. >

Example Command:
Bash

docker-compose up --build

This starts the backend Flask server and ensures all volumes are correctly mounted.
üöÄ How to Run the Project
1. Start the Backend
Bash

python src/prototype/backend/app.py

The backend exposes REST endpoints (/health and /process) to manage the pipeline.
2. Start the Frontend
Bash

streamlit run src/prototype/frontend/streamlit_app.py

The Streamlit app visualizes segmentation results and allows downloading GeoJSON masks.

    [!NOTE] The project is designed for GPU-enabled servers. CPU startup is not tested. Ensure input/output directories are correctly defined in config.py.

üõ† Troubleshooting (Manual Installation)

If Docker doesn't work as expected, you can see all used packages for this project in the requirements.txt    


üèó Architecture & Data
The Architecture

    Backend: Flask REST API

    Frontend: Streamlit

    AI Models: GroundingDINO + SamGeo2

The Data

Input data is based on open-source data for Lower Saxony, focusing on the Leuphana Campus in L√ºneburg.

    Product: Digital Orthophotos (DOP)

    Resolution: ~20 cm per pixel

    Source: LGN Open Geodata DOP https://ni-lgln-opengeodata.hub.arcgis.com/apps/lgln-opengeodata::digitales-orthophoto-dop/explore


üìà Results & Limitations
Results

The prototype successfully detects most trees in the provided .tif.

    Bounding boxes are created with DINO.

    Refined masks are produced by SAM.

    Results are visualized on an interactive map via Streamlit + Leafmap.

Limitations

    False segmentation may occur in shadowed areas.

    Not all trees are detected in dense areas.


Approaches for further Improvements:
To enhance the perfomance, this are some possibilities to try out 

    Optimizing filtering functions.

    Tuning model hyperparameters.

    Gather different data.

    Training a custom smaller model for specific data.
